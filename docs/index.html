<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Track your barbell workouts, calculate plate loading, and visualize your progress">
  <title>Plate Calculator and Progress Tracker</title>
  
  <!-- External Libraries -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  
  <!-- Stylesheet -->
  <link rel="stylesheet" href="styles.css">
</head>

<body>
  <div class="container">
    <!-- ========== HEADER ========== -->
    <header>
      <h1>Plate Calculator/Progress Log</h1>
      <nav class="header-actions">
        <select id="weightGoalSelect" class="goal-select" aria-label="Select weight goal">
          <option value="cutting">Cutting</option>
          <option value="bulking">Bulking</option>
          <option value="maintenance">Maintenance</option>
        </select>
        <button id="themeToggle" class="icon-button" title="Toggle Dark Mode" aria-label="Toggle Dark Mode">
          🌙
        </button>
        <button id="toggleHistory">History</button>
        <button id="toggleSettings">Settings</button>
      </nav>
    </header>

      <!-- ========== EXERCISE SELECTION ========== -->
      <section id="exerciseSection" class="section">
        <h2>Exercise Selection</h2>
        
        <div id="exerciseListContainer" class="exercise-list">
          <!-- Push Exercises -->
          <div class="exercise-category">
            <h3 class="category-title">Push</h3>
            <div class="panel">
              <select id="pushSelect" class="exercise-select" aria-label="Select push exercise">
                <option value="">-- Select Exercise --</option>
                <option value="Barbell Bench Press">Barbell Bench Press</option>
                <option value="Incline Bench Press">Incline Bench Press</option>
                <option value="Decline Bench Press">Decline Bench Press</option>
                <option value="Overhead Press (OHP)">Overhead Press</option>
              </select>
            </div>
          </div>
          
          <!-- Pull Exercises -->
          <div class="exercise-category">
            <h3 class="category-title">Pull</h3>
            <div class="panel">
              <select id="pullSelect" class="exercise-select" aria-label="Select pull exercise">
                <option value="">-- Select Exercise --</option>
                <option value="Bent-Over Row">Bent-Over Row</option>
                <option value="Pendlay Row">Pendlay Row</option>
                <option value="Barbell Curl">Barbell Curl</option>
                <option value="Barbell Shrug">Barbell Shrug</option>
                <option value="Power Clean">Power Clean</option>
                <option value="Power Snatch">Power Snatch</option>
                <option value="Romanian Deadlift">Romanian Deadlift</option>
                <option value="Conventional Deadlift">Conventional Deadlift</option>
              </select>
            </div>
          </div>
          
          <!-- Leg Exercises -->
          <div class="exercise-category">
            <h3 class="category-title">Legs</h3>
            <div class="panel">
              <select id="legsSelect" class="exercise-select" aria-label="Select leg exercise">
                <option value="">-- Select Exercise --</option>
                <option value="Back Squat">Back Squat</option>
                <option value="Front Squat">Front Squat</option>
                <option value="Overhead Squat">Overhead Squat</option>
                <option value="Barbell Lunge">Barbell Lunge</option>
                <option value="Barbell Hip Thrust">Barbell Hip Thrust</option>
                <option value="Standing Calf Raise">Standing Calf Raise</option>
              </select>
            </div>
          </div>
        </div>
      </section>

      <!-- ========== ACTIVITY LOG (NON-EXERCISE) ========== -->
      <section id="activityLogSection" class="section">
        <h2>Log Other Activity</h2>
        
        <form id="activityForm">
          <div class="panel">
            <label for="activityInput">Activity Notes:</label>
            <textarea 
              id="activityInput" 
              rows="4" 
              placeholder="What did you do today?&#10;• Cardio session&#10;• Mobility work&#10;• Recovery day&#10;• Deload week&#10;• Other activities..."
              aria-describedby="activityHelp"></textarea>
          </div>
          
          <div class="panel">
            <label for="activityDateInput">Date:</label>
            <input type="date" id="activityDateInput" required>
          </div>
          
          <div class="panel">
            <label class="checkbox-label">
              <input type="checkbox" id="includeBodyWeight">
              <span>Log body weight</span>
            </label>
            <div id="bodyWeightInput" class="hidden conditional-input">
              <label for="bodyWeight">Body Weight (lbs):</label>
              <input 
                type="number" 
                id="bodyWeight" 
                min="50" 
                max="500" 
                step="0.1" 
                placeholder="e.g., 185.5">
            </div>
          </div>
          
          <div class="actions">
            <button type="button" id="saveActivity" class="save">Save Entry</button>
          </div>
        </form>
      </section>

      <!-- ========== ACTIVE WORKOUT FORM ========== -->
      <section id="workoutForm" class="section hidden">
        <h2 id="selectedExercise"></h2>

        <form id="workoutFormElement">
          <!-- Plate Calculator -->
          <div class="panel">
            <h3>Plate Loading (per side)</h3>
            <div style="margin-bottom: 15px;">
              <label for="barWeightInput" style="display: block; margin-bottom: 5px;">Bar Weight (lbs):</label>
              <input 
                type="number" 
                id="barWeightInput" 
                value="45" 
                min="0" 
                max="999" 
                step="0.1"
                maxlength="3"
                style="width: 100px; padding: 8px;"
                aria-label="Custom bar weight">
              <small style="display: block; margin-top: 5px; color: var(--text-secondary);">Standard: 45 lbs | Women's: 35 lbs | Technique: 15 lbs</small>
            </div>
            <div id="platesGrid" class="grid" role="group" aria-label="Plate selection"></div>
            <div class="total-weight">
              <div id="totalWeight" class="weight" aria-live="polite">45 lbs</div>
              <small>Total Weight (bar + plates)</small>
            </div>
          </div>

          <!-- Workout Parameters -->
          <div class="panel">
            <div class="slider-container">
              <label for="setsRange" id="setsLabel">Sets: 0</label>
              <div style="display: flex; gap: 10px; align-items: center;">
                <input 
                  type="range" 
                  min="0" 
                  max="20" 
                  id="setsRange" 
                  value="0" 
                  style="flex: 1;"
                  aria-labelledby="setsLabel">
                <input 
                  type="number" 
                  min="0" 
                  max="99" 
                  step="1"
                  maxlength="2"
                  id="setsInput" 
                  value="0"
                  style="width: 70px;"
                  aria-label="Sets numeric input">
              </div>
            </div>
            
            <div class="slider-container">
              <label for="repsRange" id="repsLabel">Reps: 0</label>
              <div style="display: flex; gap: 10px; align-items: center;">
                <input 
                  type="range" 
                  min="0" 
                  max="50" 
                  id="repsRange" 
                  value="0" 
                  style="flex: 1;"
                  aria-labelledby="repsLabel">
                <input 
                  type="number" 
                  min="0" 
                  max="99" 
                  step="1"
                  maxlength="2"
                  id="repsInput" 
                  value="0"
                  style="width: 70px;"
                  aria-label="Reps numeric input">
              </div>
            </div>
            
            <div class="slider-container">
              <label for="rpeRange" id="rpeLabel">RPE: 0</label>
              <div style="display: flex; gap: 10px; align-items: center;">
                <input 
                  type="range" 
                  min="0" 
                  max="10" 
                  step="0.01"
                  id="rpeRange" 
                  value="0" 
                  style="flex: 1;"
                  aria-labelledby="rpeLabel">
                <input 
                  type="number" 
                  min="0" 
                  max="10" 
                  step="0.01"
                  maxlength="5"
                  id="rpeInput" 
                  value="0"
                  style="width: 70px;"
                  aria-label="RPE numeric input">
              </div>
            </div>
          </div>

          <!-- Date Input -->
          <div class="panel">
            <label for="dateInput">Date:</label>
            <input type="date" id="dateInput" required>
          </div>
          
          <!-- Comments -->
          <div class="panel">
            <label for="commentsInput">Comments (optional):</label>
            <textarea 
              id="commentsInput" 
              rows="3" 
              placeholder="Add comments about your workout..."></textarea>
          </div>
          
          <!-- Body Weight (Optional) -->
          <div class="panel">
            <label class="checkbox-label">
              <input type="checkbox" id="workoutIncludeBodyWeight">
              <span>Log body weight</span>
            </label>
            <div id="workoutBodyWeightInput" class="hidden conditional-input">
              <label for="workoutBodyWeight">Body Weight (lbs):</label>
              <input 
                type="number" 
                id="workoutBodyWeight" 
                min="50" 
                max="500" 
                step="0.1" 
                placeholder="e.g., 185.5">
            </div>
          </div>

          <!-- Form Actions -->
          <div class="actions">
            <button type="button" id="saveWorkout" class="save">Save Workout</button>
            <button type="button" id="cancelWorkout" class="cancel">Cancel</button>
          </div>
        </form>
      </section>

      <!-- ========== WORKOUT HISTORY ========== -->
      <section id="historySection" class="section hidden">
        <!-- History Header -->
        <div class="history-header">
          <h2>Workout History</h2>
          <div class="history-actions">
            <button id="exportCSV" aria-label="Export to CSV">Export CSV</button>
            <button id="copyClipboard" aria-label="Copy to clipboard">Copy</button>
            <button id="deleteAll" class="danger" aria-label="Delete all history">Delete All</button>
          </div>
        </div>
        
        <!-- Week Navigation -->
        <nav class="panel" id="weekNavigation" aria-label="Week navigation">
          <div class="week-controls">
            <button id="prevWeek" aria-label="Previous week">Previous Week</button>
            <div id="weekRange" class="week-range" role="status">Loading...</div>
            <button id="nextWeek" disabled aria-label="Next week">Next Week</button>
          </div>
          <div class="week-stats" id="weekStats" role="complementary"></div>
        </nav>
        
        <!-- History List -->
        <div id="historyList" role="region" aria-label="Workout history list"></div>
        
        <!-- Progress Chart Container -->
        <div id="chartContainer" class="hidden">
          <!-- Chart Header -->
          <header class="chart-header">
            <h3>Progress Chart</h3>
            <div class="chart-view-toggle" role="tablist" aria-label="Chart time range">
              <button 
                id="chartAllTimeBtn" 
                class="toggle-btn active" 
                role="tab" 
                aria-selected="true">
                All Time
              </button>
              <button 
                id="chartCurrentWeekBtn" 
                class="toggle-btn" 
                role="tab" 
                aria-selected="false">
                Current Week
              </button>
            </div>
          </header>
          
          <!-- Exercise Selection for Chart -->
          <div class="panel">
            <label for="chartExerciseSelect">Select exercise to see progress:</label>
            <select id="chartExerciseSelect" aria-label="Select exercise for chart"></select>
          </div>
          
          <!-- Metrics Selection -->
          <fieldset class="panel">
            <legend>Metrics to display:</legend>
            <div class="metrics-checkboxes">
              <label class="checkbox-label">
                <input type="checkbox" id="showWeight" checked>
                <span>Weight</span>
              </label>
              <label class="checkbox-label">
                <input type="checkbox" id="showVolume" checked>
                <span>Volume</span>
              </label>
              <label class="checkbox-label">
                <input type="checkbox" id="showRPE">
                <span>RPE</span>
              </label>
              <label class="checkbox-label">
                <input type="checkbox" id="showBodyWeight">
                <span>Body Weight</span>
              </label>
            </div>
          </fieldset>
          
          <!-- Chart Canvas -->
          <div class="chart-wrapper">
            <canvas id="progressChart" role="img" aria-label="Progress chart visualization"></canvas>
          </div>
        </div>
      </section>

      <!-- ========== ERROR LOG ========== -->
      <aside id="errorLog" class="section hidden" role="alert" aria-live="assertive"></aside>
    </main>

    <!-- ========== MODALS & OVERLAYS ========== -->
    
    <!-- Custom Confirmation Modal -->
    <div id="confirmModal" class="modal-overlay hidden" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <div class="modal-box">
        <h3 id="modalTitle">Are you sure?</h3>
        <p id="modalText">This action cannot be undone.</p>
        <div class="modal-actions">
          <button id="modalCancel" class="modal-button" type="button">Cancel</button>
          <button id="modalConfirm" class="modal-button danger" type="button">Confirm</button>
        </div>
      </div>
    </div>
    
    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay hidden" role="status" aria-live="polite">
      <div class="loading-spinner">
        <div class="spinner" aria-hidden="true"></div>
        <div class="loading-text" id="loadingText">Loading...</div>
      </div>
    </div>
    
    <!-- Body Weight Success Modal -->
    <div id="bodyWeightSuccessModal" class="modal-overlay hidden" role="alert" aria-live="assertive">
      <div class="modal-box success-modal">
        <div style="text-align: center; font-size: 3rem; margin-bottom: 10px;">💪</div>
        <h3 style="text-align: center; margin-bottom: 10px; color: var(--emerald-600);">You Got This!</h3>
        <p style="text-align: center; color: var(--text-secondary);">Your hard work is paying off!</p>
        <button id="closeSuccessModal" class="modal-button" type="button" style="width: 100%; margin-top: 15px;">Close</button>
      </div>
    </div>

    <!-- ========== SETTINGS SECTION ========== -->
    <section id="settingsSection" class="section hidden">
      <h2>⚙️ Settings</h2>
      
      <!-- Message Management -->
      <div class="panel">
        <h3>💬 Custom Messages</h3>
        <p class="help-text">Add, edit, or clear custom motivational and shame messages for body weight tracking.</p>
        
        <!-- Motivational Messages -->
        <div style="margin-bottom: var(--spacing-lg);">
          <h4 style="color: var(--emerald-600);">Motivational Messages (Success) 💪</h4>
          <div id="motivationalMessagesList" class="messages-list"></div>
          <div style="display: flex; gap: var(--spacing-sm); margin-top: var(--spacing-sm);">
            <input 
              type="text" 
              id="newMotivationalMessage" 
              placeholder="Add new motivational message..." 
              maxlength="100"
              style="flex: 1;"
            />
            <button id="addMotivationalMessage" class="button">Add</button>
          </div>
        </div>
        
        <!-- Shame Messages -->
        <div style="margin-bottom: var(--spacing-lg);">
          <h4 style="color: var(--red-600);">Shame Messages 🐷</h4>
          <div id="shameMessagesList" class="messages-list"></div>
          <div style="display: flex; gap: var(--spacing-sm); margin-top: var(--spacing-sm);">
            <input 
              type="text" 
              id="newShameMessage" 
              placeholder="Add new shame message..." 
              maxlength="100"
              style="flex: 1;"
            />
            <button id="addShameMessage" class="button">Add</button>
          </div>
        </div>
        
        <!-- Strength Motivational Messages -->
        <div style="margin-bottom: var(--spacing-lg);">
          <h4 style="color: var(--emerald-600);">Strength Gain Messages 💥</h4>
          <p class="help-text" style="font-size: var(--font-size-xs); margin-bottom: var(--spacing-sm);">Messages shown when you get stronger (higher volume).</p>
          <div id="strengthMotivationalMessagesList" class="messages-list"></div>
          <div style="display: flex; gap: var(--spacing-sm); margin-top: var(--spacing-sm);">
            <input 
              type="text" 
              id="newStrengthMotivationalMessage" 
              placeholder="Add new strength gain message..." 
              maxlength="100"
              style="flex: 1;"
            />
            <button id="addStrengthMotivationalMessage" class="button">Add</button>
          </div>
        </div>
        
        <!-- Strength Shame Messages -->
        <div style="margin-bottom: var(--spacing-lg);">
          <h4 style="color: var(--amber-600);">Strength Loss Messages 😤</h4>
          <p class="help-text" style="font-size: var(--font-size-xs); margin-bottom: var(--spacing-sm);">Messages shown when volume decreases.</p>
          <div id="strengthShameMessagesList" class="messages-list"></div>
          <div style="display: flex; gap: var(--spacing-sm); margin-top: var(--spacing-sm);">
            <input 
              type="text" 
              id="newStrengthShameMessage" 
              placeholder="Add new strength loss message..." 
              maxlength="100"
              style="flex: 1;"
            />
            <button id="addStrengthShameMessage" class="button">Add</button>
          </div>
        </div>
        
        <!-- Reset Actions -->
        <div class="modal-actions" style="margin-top: var(--spacing-lg);">
          <button id="resetMessages" class="button" style="background-color: var(--yellow-600);">
            Reset to Defaults
          </button>
          <button id="clearMessageTracking" class="button" style="background-color: var(--blue-600);">
            Clear Message History
          </button>
        </div>
      </div>
    </section>
  </div>

  <!-- Scripts -->
  <script src="script.js"></script>
</body>
</html>
